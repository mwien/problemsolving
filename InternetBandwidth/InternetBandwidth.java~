import java.util.LinkedList;
import java.util.Queue;
import java.util.Scanner;


public class InternetBandwidth {
    


    public static void main(String[] args) {
        Scanner s = new Scanner(System.in);
        int cnt = 1;
        while(true) {
           int n = s.nextInt();
           if(n == 0) break;
           System.out.println("Network " + cnt);
           cnt++;
           int[][] graph = new int[n][n];
           int start = s.nextInt()-1;
           int target = s.nextInt()-1;
           int c = s.nextInt();
           for(int i = 0; i < c; i++) {
               int a = s.nextInt()-1;
               int b = s.nextInt()-1;
               int bandwidth = s.nextInt();
               graph[a][b] += bandwidth;
               graph[b][a] += bandwidth;
           }
           int res = fordFulkerson(graph, start, target);
           System.out.println("The bandwidth is " + res + ".");
           System.out.println();
        }
    }

}
